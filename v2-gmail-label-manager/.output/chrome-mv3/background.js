var background=(function(){"use strict";function o(e){return e==null||typeof e=="function"?{main:e}:e}const n=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,s=o(()=>{console.log("Gmail Label Manager v2.0 - Background script initialized"),n.runtime.onInstalled.addListener(({reason:e})=>{e==="install"?(console.log("Extension installed - Welcome to Gmail Label Manager!"),n.tabs.create({url:n.runtime.getURL("/onboarding.html")})):e==="update"&&console.log("Extension updated to v2.0")}),n.runtime.onMessage.addListener((e,c,u)=>{if(e.type==="AUTH_REQUEST")return i().then(u),!0})});async function i(){try{return{success:!0,token:await n.identity.getAuthToken({interactive:!0})}}catch(e){return console.error("Authentication failed:",e),{success:!1,error:e.message}}}function d(){}function r(e,...c){}const a={debug:(...e)=>r(console.debug,...e),log:(...e)=>r(console.log,...e),warn:(...e)=>r(console.warn,...e),error:(...e)=>r(console.error,...e)};let t;try{t=s.main(),t instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw a.error("The background crashed on startup!"),e}return t})();
